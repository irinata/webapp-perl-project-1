# Тестовое приложение на Perl
Приложение использует веб-фреймворк Dancer2 и библиотеку Template::Toolkit.
Работает на БД PostgreSQL.

### Предварительные требования
Установленный docker и docker-compose _(https://docs.docker.com/engine/install/debian/)_.

### Шаги для запуска
- Клонируйте репозиторий
    ```bash
    git clone https://github.com/irinata/webapp-perl-project-1.git
    ```
- В директории проекта запустите приложение
    ```bash
    docker-compose up
    ```
- После сборки и запуска контейнеров приложение будет доступно по адресу _http://localhost:5000_

###  После запуска
Приложение создает БД и схему, но не добавляет в нее данные. Для этого используется скрипт parser.pl в корне проекта
```bash
parser.pl --help
```
Файл с данными для парсера _maillog_ находится в корне проекта.

Чтобы запустить в контейнере приложения parser.pl и передать ему данные, выполните команду
```bash
cat maillog | docker exec -i <имя_контейнера> /app/parser.pl
```
Имя контейнера приложения можно узнать командой:
```bash
docker ps
```
Оно будет примерно таким: _webapp-perl-project-1-app-1_.

### Остановка и удаление контейнера
Следующая команда остановит и удалит контейнер, образы и данные (volumes), созданные в рамках compose-файла
```bash
docker-compose down -v --rmi all
```
